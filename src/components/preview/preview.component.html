
<div class="w-full max-w-4xl mx-auto flex flex-col items-center">
  <div id="resume-preview-content" class="bg-white shadow-2xl rounded-lg w-full aspect-[8.5/11] p-8 md:p-12 text-gray-800 leading-relaxed overflow-hidden">
    <!-- Header -->
    <header class="text-center border-b-2 border-gray-300 pb-4 mb-6">
      <h1 class="text-4xl font-bold tracking-wider uppercase">{{ resume().profile.name }}</h1>
      <h2 class="text-xl font-semibold text-indigo-600 tracking-widest">{{ resume().profile.title }}</h2>
      <div class="flex justify-center items-center space-x-4 mt-2 text-sm text-gray-600">
        <span>{{ resume().profile.email }}</span>
        <span>&bull;</span>
        <span>{{ resume().profile.phone }}</span>
        <span>&bull;</span>
        <span>{{ resume().profile.website }}</span>
      </div>
    </header>

    <!-- Main Content -->
    <main class="space-y-6">
      <!-- Summary -->
      <section>
        <h3 class="text-lg font-bold uppercase tracking-wider border-b border-gray-200 pb-1 mb-2 text-indigo-700">Summary</h3>
        <p class="text-sm">{{ resume().profile.summary }}</p>
      </section>

      <!-- Experience -->
      <section>
        <h3 class="text-lg font-bold uppercase tracking-wider border-b border-gray-200 pb-1 mb-2 text-indigo-700">Experience</h3>
        @for (exp of resume().experience; track $index) {
          <div class="mb-3">
            <div class="flex justify-between items-baseline">
              <h4 class="text-md font-semibold">{{ exp.company }}</h4>
              <p class="text-xs font-mono text-gray-500">{{ formatDate(exp.startDate) }} - {{ exp.endDate === 'Present' ? 'Present' : formatDate(exp.endDate) }}</p>
            </div>
            <p class="text-sm italic text-gray-600">{{ exp.title }}</p>
            <ul class="list-disc list-inside mt-1 text-sm space-y-1">
              @for (desc of getDescriptions(exp.description); track $index) {
                <li>{{ desc }}</li>
              }
            </ul>
          </div>
        }
      </section>

      <!-- Education -->
      <section>
        <h3 class="text-lg font-bold uppercase tracking-wider border-b border-gray-200 pb-1 mb-2 text-indigo-700">Education</h3>
        @for (edu of resume().education; track $index) {
          <div class="mb-3">
            <div class="flex justify-between items-baseline">
              <h4 class="text-md font-semibold">{{ edu.institution }}</h4>
              <p class="text-xs font-mono text-gray-500">{{ formatDate(edu.startDate) }} - {{ formatDate(edu.endDate) }}</p>
            </div>
            <p class="text-sm italic text-gray-600">{{ edu.degree }}</p>
            @if (edu.description) {
              <p class="text-sm mt-1">{{ edu.description }}</p>
            }
          </div>
        }
      </section>

      <!-- Skills -->
      <section>
        <h3 class="text-lg font-bold uppercase tracking-wider border-b border-gray-200 pb-1 mb-2 text-indigo-700">Skills</h3>
        <div class="flex flex-wrap gap-2">
          @for (skill of resume().skills; track $index) {
            <span class="bg-indigo-100 text-indigo-800 text-sm font-medium px-3 py-1 rounded-full">{{ skill.name }}</span>
          }
        </div>
      </section>
    </main>
  </div>
  
  <button (click)="downloadPdf()" [disabled]="isGenerating()" class="mt-8 px-8 py-3 bg-green-600 text-white font-bold rounded-lg shadow-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors duration-200">
    @if (isGenerating()) {
      <span>Generating PDF...</span>
    } @else {
      <span>Download as PDF</span>
    }
  </button>
</div>
